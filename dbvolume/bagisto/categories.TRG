TYPE=TRIGGERS
triggers='CREATE DEFINER=`bagisto_user`@`%` TRIGGER trig_categories_insert\n            AFTER INSERT ON categories\n            FOR EACH ROW\n            BEGIN\n                            DECLARE urlPath VARCHAR(255);\n            DECLARE localeCode VARCHAR(255);\n            DECLARE done INT;\n            DECLARE curs CURSOR FOR (SELECT category_translations.locale\n                    FROM category_translations\n                    WHERE category_id = NEW.id);\n            DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\n\n\n            IF EXISTS (\n                SELECT *\n                FROM category_translations\n                WHERE category_id = NEW.id\n            )\n            THEN\n\n                OPEN curs;\n\n            	SET done = 0;\n                REPEAT\n                	FETCH curs INTO localeCode;\n\n                    SELECT get_url_path_of_category(NEW.id, localeCode) INTO urlPath;\n\n                    IF NEW.parent_id IS NULL\n                    THEN\n                        SET urlPath = \'\';\n                    END IF;\n\n                    UPDATE category_translations\n                    SET url_path = urlPath\n                    WHERE\n                        category_translations.category_id = NEW.id\n                        AND category_translations.locale = localeCode;\n\n                UNTIL done END REPEAT;\n\n                CLOSE curs;\n\n            END IF;\n            END' 'CREATE DEFINER=`bagisto_user`@`%` TRIGGER trig_categories_update\n            AFTER UPDATE ON categories\n            FOR EACH ROW\n            BEGIN\n                            DECLARE urlPath VARCHAR(255);\n            DECLARE localeCode VARCHAR(255);\n            DECLARE done INT;\n            DECLARE curs CURSOR FOR (SELECT category_translations.locale\n                    FROM category_translations\n                    WHERE category_id = NEW.id);\n            DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\n\n\n            IF EXISTS (\n                SELECT *\n                FROM category_translations\n                WHERE category_id = NEW.id\n            )\n            THEN\n\n                OPEN curs;\n\n            	SET done = 0;\n                REPEAT\n                	FETCH curs INTO localeCode;\n\n                    SELECT get_url_path_of_category(NEW.id, localeCode) INTO urlPath;\n\n                    IF NEW.parent_id IS NULL\n                    THEN\n                        SET urlPath = \'\';\n                    END IF;\n\n                    UPDATE category_translations\n                    SET url_path = urlPath\n                    WHERE\n                        category_translations.category_id = NEW.id\n                        AND category_translations.locale = localeCode;\n\n                UNTIL done END REPEAT;\n\n                CLOSE curs;\n\n            END IF;\n            END'
sql_modes=1073741824 1073741824
definers='bagisto_user@%' 'bagisto_user@%'
client_cs_names='utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_unicode_ci' 'utf8mb4_unicode_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci'
created=164668884492 164668884495
